@inherits StartupSyncDialogBase

<MudDialog>
    <DialogContent>
        @if (Sync)
        {
            <MudText Typo=@Typo.body1>@ProgressMessage</MudText>
            <MudProgressLinear Indeterminate="@(SyncState == SyncState.Running || SyncState == SyncState.Cancelling)" Value="@(SyncState == SyncState.Completed ? 100 : 0)" Color="@Color.Primary" />

            @foreach (var source in SyncSources)
            {
                <MudContainer Class="mx-0 my-2 pa-0">
                    <MudText Typo=@Typo.body1>@source.Source</MudText>
                    <MudText Typo=@Typo.body2>@source.ProgressMessage</MudText>
                    <MudProgressLinear Indeterminate="@(source.SyncState == SyncState.Running)" Value="@(source.SyncState == SyncState.Completed ? 100 : 0)" Color="@Color.Info" />
                </MudContainer>
            }
        }
        else
        {
            <MudText Typo=@Typo.body1>Would you like to re-sync source libraries?</MudText>
        }
    </DialogContent>
    <DialogActions>
        @if (Sync)
        {
            <MudButton Disabled="@(SyncState != SyncState.Cancelled)" Color="@Color.Primary" OnClick="@OnStartSync">Sync</MudButton>
            <MudButton Disabled="@(SyncState != SyncState.Running)" Color="@Color.Error" OnClick="@OnCancel">Cancel</MudButton>
            <MudButton Disabled="@(SyncState == SyncState.Running || SyncState == SyncState.Cancelling)" Color="@Color.Success" OnClick="@OnClose">Close</MudButton>
        }
        else
        {
            <MudButton Color="@Color.Primary" OnClick="@OnStartSync">Yes</MudButton>
            <MudButton Color="@Color.Success" OnClick="@OnClose">No</MudButton>
        }
    </DialogActions>
</MudDialog>