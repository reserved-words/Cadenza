
<MudButtonGroup Color="Color.Dark" Variant="Variant.Filled" Class="ma-0 pa-0">
    <MudIconButton Icon="@Icons.Material.Filled.SkipPrevious" OnClick="SkipPrevious" Disabled="@(!CanSkipPrevious)" />
    <MudIconButton Icon="@Icons.Material.Filled.PlayArrow" OnClick="Resume" Disabled="@(!CanPlay)" Class="@PlayButtonClass()" />
    <MudIconButton Icon="@Icons.Material.Filled.Pause" OnClick="Pause" Disabled="@(!CanPause)" Class="@PauseButtonClass()" />
    <MudIconButton Icon="@Icons.Material.Filled.SkipNext" OnClick="SkipNext" Disabled="@(!CanSkipNext)" />
</MudButtonGroup>

@code {
    [Inject] public IMessenger Messenger { get; set; }

    [Parameter] public bool CanPause { get; set; }
    [Parameter] public bool CanPlay { get; set; }
    [Parameter] public bool CanSkipNext { get; set; }

    [Parameter] public Func<Task> OnPause { get; set; }
    [Parameter] public Func<Task> OnResume { get; set; }
    
    protected bool CanSkipPrevious => CanPlay || CanPause;

    protected async Task Pause()
    {
        await OnPause();
    }

    protected async Task Resume()
    {
        await OnResume();
    }

    public async Task SkipNext()
    {
        await Messenger.Send(this, new SkipNextTrackEventArgs());
    }

    public async Task SkipPrevious()
    {
        await Messenger.Send(this, new SkipPreviousTrackEventArgs());
    }

    private string PlayButtonClass()
    {
        return Display(!CanPause);
    }

    private string PauseButtonClass()
    {
        return Display(CanPause);
    }

    private string Display(bool show) => show ? "d-flex" : "d-none";
}