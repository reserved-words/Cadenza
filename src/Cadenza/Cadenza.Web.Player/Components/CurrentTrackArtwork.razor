@using Cadenza.Common.Domain.Model.Track
@using Cadenza.Web.Common.Interfaces

<img src="@ArtworkUrl" class="artwork" />

@code {
    
    [Inject]
    public IArtworkFetcher ArtworkFetcher { get; set; }

    [Parameter]
    public TrackFull Model {get; set;}

    public string ArtworkUrl { get; private set; }

    protected override async Task OnParametersSetAsync()
    {
        if (Model != null)
        {
            ArtworkUrl = await ArtworkFetcher.GetArtworkUrl(Model.Album, Model.Track.Id);
        }
        else
        {
            ArtworkUrl = await ArtworkFetcher.GetArtworkUrl(null);
        }

        StateHasChanged();
    }

}
