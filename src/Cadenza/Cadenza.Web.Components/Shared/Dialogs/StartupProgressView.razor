@using Cadenza.State.Interfaces;
@using Cadenza.State.Store;

<MudContainer Class="mx-0 my-2 pa-0">
    <MudText Typo=@Typo.body1>@ConnectionState.Title</MudText>
    <MudText Typo=@Typo.body2>@ConnectionState.Message</MudText>
    <MudProgressLinear Indeterminate="@Indeterminate"
                       Value="@Progress"
                       Color="@Color" />
</MudContainer>

@code 
{
    [Parameter] public IConnectionState ConnectionState { get; set; }

    private bool Indeterminate => ConnectionState.State == TaskState.Running;
    
    private int Progress => ConnectionState.State == TaskState.Errored 
        || ConnectionState.State == TaskState.Completed 
            ? 100 
            : 0;

    private Color Color => ConnectionState.State == TaskState.Errored 
        ? Color.Error 
        : ConnectionState.State == TaskState.Completed 
        ? Color.Success 
        : Color.Info;
}