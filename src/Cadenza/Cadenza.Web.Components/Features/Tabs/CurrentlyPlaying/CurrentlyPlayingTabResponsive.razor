@using Cadenza.Web.Components.Features.Tabs.CurrentlyPlaying.Components

<TabGrid>

    @if (Model != null)
    {
        <TabGridColumn sm="6" md="8">
            <TabGridRow RowHeight="@RowHeight.Fixed">

                <SubGrid>

                    <SubGridColumn sm="12" md="6">

                        <SubGridRow RowHeight="@RowHeight.Fixed">

                            <PlayingTrack Model="@Model.Track"
                                          Breakpoint="@Breakpoint" />

                        </SubGridRow>

                        <SubGridRow RowHeight="@RowHeight.Fixed">

                            <MudDivider Class="xs-only" />
                            <PlayingArtist Model="@Model.Artist"
                                           Breakpoint="@Breakpoint" />

                        </SubGridRow>

                        @if (Breakpoint == Breakpoint.Sm)
                        {
                            <SubGridRow RowHeight="@RowHeight.Fixed">

                                <MudDivider Class="xs-only" />
                                <PlayingAlbum Model="@Model.Album"
                                              AlbumTrack="@Model.AlbumTrack"
                                              Breakpoint="@Breakpoint" />

                            </SubGridRow>
                        }

                    </SubGridColumn>

                    @if (Breakpoint != Breakpoint.Sm)
                    {
                        <SubGridColumn sm="12" md="6">
                            <SubGridRow RowHeight="@RowHeight.Fixed">

                                <MudDivider Class="xs-only" />
                                <PlayingAlbum Model="@Model.Album"
                                              AlbumTrack="@Model.AlbumTrack"
                                              Breakpoint="@Breakpoint" />

                            </SubGridRow>
                        </SubGridColumn>
                    }

                </SubGrid>

            </TabGridRow>
        </TabGridColumn>

        <TabGridColumn sm="6" md="4">
            <TabGridRow RowHeight="@RowHeight.Full">

                @if (!string.IsNullOrWhiteSpace(Model.Track.Lyrics))
                {
                    <MudHidden Breakpoint="Breakpoint.Xs" Invert="true">
                        <MudDivider />
                        <MudExpansionPanels Dense="true" DisableGutters="true" Square="true">
                            <MudExpansionPanel Text="Lyrics">
                                <PlayingLyrics Model="@Model.Track"
                                               Breakpoint="@Breakpoint" />
                            </MudExpansionPanel>
                        </MudExpansionPanels>
                    </MudHidden>
                }

                <MudHidden Breakpoint="Breakpoint.Xs">
                    <PlayingLyrics Model="@Model.Track"
                                   Breakpoint="@Breakpoint" />
                </MudHidden>
            </TabGridRow>
        </TabGridColumn>
    }

</TabGrid>

@code {
    [Parameter] public TrackFullVM Model { get; set; }
    [Parameter] public Breakpoint Breakpoint { get; set; }

    private bool ShowAlbumHeader => Breakpoint != Breakpoint.Xs;

    private bool ShowArtistHeader => Breakpoint != Breakpoint.Xs;
}