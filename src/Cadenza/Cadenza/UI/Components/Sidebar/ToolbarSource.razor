@using Cadenza.Core.Common
@inherits ToolbarSourceBase

<MudIconButton Icon="@Model.Connector.GetIcon()"
               Style="flex: unset;"
               Color="@Color"
               OnClick="@(() => ShowError())" />

@if (Model.Status == ConnectorStatus.Errored)
{
    <MudPopover Open="@Model.ShowError"
                Fixed="true">
        <MudAlert Severity="Severity.Error"
              ContentAlignment="HorizontalAlignment.Center"
              Dense="true"
              Variant="@Variant.Filled"
              ShowCloseIcon="true"
              CloseIconClicked="(() => HideError())">
            <MudText Typo="@Typo.body1">@Model.ErrorTitle</MudText>
            <MudText Typo="@Typo.body2">@Model.ErrorMessage</MudText>
        </MudAlert>
    </MudPopover>
}
