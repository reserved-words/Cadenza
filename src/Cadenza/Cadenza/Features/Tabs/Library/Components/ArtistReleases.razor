@if (Releases != null)
{
    <MudHidden Breakpoint="Breakpoint.Xs" Invert="true">
        @if (_releaseGroups.Count == 1)
        {
            <ArtistReleaseGroupView Model="@_releaseGroups.First()" />
        }
        else
        {
            <MudExpansionPanels Dense="true" DisableGutters="true" Square="true" MultiExpansion="true">
                @for (var i = 0; i < _releaseGroups.Count; i++)
                {
                    var group = _releaseGroups[i];
                    <MudExpansionPanel Text="@group.Group.GetDisplayName()" IsInitiallyExpanded="@(i == 0)">
                        <ArtistReleaseGroupView Model="@group" />
                    </MudExpansionPanel>
                }
            </MudExpansionPanels>
        }
    </MudHidden>

    <MudHidden Breakpoint="Breakpoint.Xs">
        <MudTabs>
            @foreach (var group in Releases)
            {
                <MudTabPanel Text="@group.Group.GetDisplayName()">
                    <ArtistReleaseGroupView Model="@group" />
                </MudTabPanel>
            }
        </MudTabs>
    </MudHidden>
}

@code {
    [Parameter] public IReadOnlyCollection<ArtistReleaseGroupVM> Releases { get; set; }

    private List<ArtistReleaseGroupVM> _releaseGroups = new();

    protected override void OnParametersSet()
    {
        _releaseGroups = Releases?.ToList() ?? new List<ArtistReleaseGroupVM>();
    }
}
