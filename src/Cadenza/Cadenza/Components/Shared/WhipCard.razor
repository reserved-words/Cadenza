@using Cadenza.Core.Common

<MudCard Elevation="@Elevation"
         Class="@CardClass"
         Style="display: flex; flex-direction: column;">

    @if (Title != null)
    {
        <MudCardHeader Style="flex-grow: 0;" Class="pa-2">
            <CardHeaderContent>
                <MudText Typo="@Typo.h6">@Title</MudText>

                @if (Subtitle != null)
                {
                    <MudText Typo="@Typo.body1">@Subtitle</MudText>
                }

            </CardHeaderContent>
        </MudCardHeader>
    }

    <MudCardContent Style="flex-grow: 1;" Class="@ContentClass">
        @ChildContent
    </MudCardContent>

    @if (FooterLinks != null)
    {
        <MudCardActions Class="pt-0">
            <WhipLinks Links="@FooterLinks" />
        </MudCardActions>
    }
</MudCard>

@code{

    public string ContentClass => "fixed-height-scroll"
        + (Padding ? " pa-2" : " pa-0")
        + (FooterLinks == null ? "" : " pb-1")
        + (Title == null ? "" : " pt-0");

    public string CardClass => "fixed-height-margin" + (SideMargin ? "" : " no-side-margin");

    public int Elevation => Bordered
        ? 2
        : 0;

    [Parameter]
    public string Title { get; set; }

    [Parameter]
    public string Subtitle { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    [Parameter]
    public bool Padding { get; set; } = true;

    [Parameter]
    public bool Bordered { get; set; } = true;

    [Parameter]
    public bool SideMargin { get; set; } = true;

    [Parameter]
    public List<LinkViewModel> FooterLinks { get; set; }
}