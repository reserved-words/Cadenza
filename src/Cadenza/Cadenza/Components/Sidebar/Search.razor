@inherits SearchBase

<WhipContainer>
    <MudAutocomplete T="SearchableItem"
                     Class="mt-0 pt-0"
                     Label="Search library"
                     @bind-Value="Result"
                     SearchFunc="@Search"
                     ToStringFunc="@(e => e == null ? null : e.Name)"
                     CoerceText=true
                     CoerceValue=false
                     MinCharacters=3
                     ResetValueOnEmptyText=true>
        <ItemTemplate Context="e">
            <MudContainer Class="d-flex flex-row pa-0 ma-0"
                          title="@e.AdditionalInfo">
                <MudIcon Icon="@Icons[e.Type]"
                         Class="mb-n1 mr-2"
                         Color="@Colors[e.Type]" />
                <MudContainer Class="pa-0 ma-0">
                    <MudText Color=Color.Dark
                             Typo="@Typo.body1"
                             Class="pa-0 ma-0">
                        @e.Name
                    </MudText>
                    <MudText Color=Color.Dark
                             Typo="@Typo.body2"
                             Class="pa-0 ma-0">
                        @e.Artist
                    </MudText>
                </MudContainer>
            </MudContainer>
        </ItemTemplate>
    </MudAutocomplete>
    @if (Result != null)
    {
        <WhipCard Padding=true>
            <MudContainer Class="d-flex flex-row pa-0 ma-0">
                <MudIcon Icon="@MudBlazor.Icons.Material.Filled.PlayCircleOutline"
                     Class="mb-n1 mr-2" />
                <MudContainer Class="pa-0 ma-0">
                    <MudText Color=Color.Dark
                         Typo="@Typo.body1"
                         Class="pa-0 ma-0">
                        @Result.Name
                    </MudText>
                    <MudText Color=Color.Dark
                         Typo="@Typo.body2"
                         Class="pa-0 ma-0">
                        @Result.Artist
                    </MudText>
                    <MudText Color=Color.Dark
                         Typo="@Typo.body2"
                         Class="pa-0 ma-0">
                        @Result.AdditionalInfo
                    </MudText>
                </MudContainer>
            </MudContainer>

        </WhipCard>
    }
</WhipContainer>