
<MudIconButton Icon="@Model.Connector.GetIcon()"
                   Style="flex: unset;"
                   Color="@Color"
                   Disabled="true"
                   OnClick="@(() => ShowError())" />

    @if (Model.Status == ConnectorStatus.Errored)
    {
        <MudPopover Open="@Model.ShowError"
            Fixed="true">
            <MudAlert Severity="Severity.Error"
              ContentAlignment="HorizontalAlignment.Center"
              Dense="true"
              Variant="@Variant.Filled"
              ShowCloseIcon="true"
              CloseIconClicked="(() => HideError())">
                <MudText Typo="@Typo.body1">@Model.ErrorTitle</MudText>
                <MudText Typo="@Typo.body2">@Model.ErrorMessage</MudText>
            </MudAlert>
        </MudPopover>
    }

@code {

    [Parameter]
    public ConnectorStatusViewModel Model { get; set; }

    private Color Color => Model.Status == ConnectorStatus.Errored 
        ? Color.Error
        : Model.Status == ConnectorStatus.Disabled
        ? Color.Default
        : Model.Status == ConnectorStatus.Connected
        ? Color.Success
        : Color.Warning;


    private void HideError()
    {
        Model.ShowError = false;
        StateHasChanged();
    }

    private void ShowError()
    {
        Model.ShowError = true;
        StateHasChanged();
    }
}