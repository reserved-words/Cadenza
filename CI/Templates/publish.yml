parameters:
- name: projectName
  type: string
- name: projectPath
  type: string
- name: artifactName
  type: string
- name: artifact
  type: string
  default: '${{ parameters.artifactName }}-${{ parameters.projectName }}'
- name: artifactFolder
  type: string
  default: '$(Pipeline.Workspace)/${{ parameters.artifact }}'

steps:
- download: current
  displayName: 'Download Artifacts'
  artifact: '${{ parameters.artifact }}'
- task: ArchiveFiles@2
  displayName: 'Archive Files'
  inputs:
    rootFolderOrFile: '${{ parameters.artifactFolder }}/${{ parameters.projectPath }}' 
    includeRootFolder: false 
    archiveFile: '${{ parameters.artifactFolder }}/${{ parameters.projectPath }}-$(Build.BuildId).zip'
- publish: '${{ parameters.artifactFolder }}/${{ parameters.projectPath }}-$(Build.BuildId).zip'
  displayName: 'Publish Archive'
  artifact: '${{ parameters.projectName }} Deployment Files'
