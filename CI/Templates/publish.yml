parameters:
- name: projectName
  type: string
- name: artifactName
  type: string
- name: artifactLocation
  type: string
- name: archiveFile
  type: string

steps:
- download: current
  displayName: 'Download Artifacts'
  artifact: '${{ parameters.artifactName }}'
- task: ArchiveFiles@2
  displayName: 'Archive Files'
  inputs:
    rootFolderOrFile: '${{ parameters.artifactLocation }}' 
    includeRootFolder: false 
    archiveFile: '${{ parameters.artifactLocation }}/${{ parameters.archiveFile }}'
- publish: '${{ parameters.artifactLocation }}/${{ parameters.archiveFile }}'
  displayName: 'Publish Archive'
  artifact: '${{ parameters.projectName }} Deployment Files'
